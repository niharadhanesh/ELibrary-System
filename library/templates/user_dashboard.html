{% extends 'base_user.html' %}

{% block title %}User Dashboard - E-Library{% endblock %}

{% block content %}

<style>
  /* Dashboard Styling */
  .dashboard-card {
      background: #ffffff;
      border-radius: 15px;
      padding: 25px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .dashboard-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 22px rgba(0, 0, 0, 0.12);
  }

  .dashboard-title {
      font-weight: 600;
      letter-spacing: .5px;
  }

  /* Table */
  .table thead {
      background: #f0f4ff;
      color: #003366;
      font-weight: bold;
  }

  .table tbody tr:hover {
      background: #f9fbff;
  }

  /* Charts Background */
  .chart-box {
      background: #ffffff;
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.06);
  }

  h5 {
      color: #003366;
      font-weight: 600;
  }

</style>

<div class="row g-4">

  <!-- Stats Cards -->
  <div class="col-md-3">
    <div class="dashboard-card">
      <h5 class="dashboard-title">üìö Books Borrowed</h5>
      <p class="fs-3 fw-bold text-primary mb-0">12</p>
    </div>
  </div>

  <div class="col-md-3">
    <div class="dashboard-card">
      <h5 class="dashboard-title">‚ù§Ô∏è Wishlist</h5>
      <p class="fs-3 fw-bold text-success mb-0">8</p>
    </div>
  </div>

  <div class="col-md-3">
    <div class="dashboard-card">
      <h5 class="dashboard-title">üîÅ Books Returned</h5>
      <p class="fs-3 fw-bold text-warning mb-0">10</p>
    </div>
  </div>

  <div class="col-md-3">
    <div class="dashboard-card">
      <h5 class="dashboard-title">üìò Active Borrowings</h5>
      <p class="fs-3 fw-bold text-danger mb-0">2</p>
    </div>
  </div>

</div>

<!-- Charts -->
<div class="row g-4 mt-2">
  <div class="col-lg-6">
    <div class="chart-box">
      <h5>üìà Reading Activity</h5>
      <canvas id="readingChart" height="150"></canvas>
    </div>
  </div>

  <div class="col-lg-6">
    <div class="chart-box">
      <h5>üìö Favorite Genres</h5>
      <canvas id="genreChart" height="150"></canvas>
    </div>
  </div>
</div>

<div class="row g-4 mt-2">

  <!-- Borrowing Pie Chart -->
  <div class="col-lg-6">
    <div class="chart-box" style="height: 320px;">
      <h5>üìä Borrowing Overview</h5>
      <canvas id="borrowPieChart"></canvas>
    </div>
  </div>

  <!-- Recent Activities -->
  <div class="col-lg-6">
    <div class="dashboard-card">
      <h5 class="dashboard-title">üïò Recent Activities</h5>
      <table class="table table-hover align-middle mt-2">
        <thead>
          <tr>
            <th>Activity</th>
            <th>Book</th>
            <th>Date</th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td><i class="bi bi-book text-primary me-2"></i> Borrowed</td>
            <td><b>Atomic Habits</b></td>
            <td>Oct 3, 2025</td>
          </tr>

          <tr>
            <td><i class="bi bi-heart text-danger me-2"></i> Added to Wishlist</td>
            <td><b>The Midnight Library</b></td>
            <td>Oct 1, 2025</td>
          </tr>

          <tr>
            <td><i class="bi bi-arrow-return-left text-success me-2"></i> Returned</td>
            <td><b>Onyx Storm</b></td>
            <td>Sep 30, 2025</td>
          </tr>
        </tbody>

      </table>
    </div>
  </div>

</div>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  // Reading Activity Chart
  new Chart(document.getElementById("readingChart"), {
    type: "line",
    data: {
      labels: ["Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct"],
      datasets: [{
        label: "Books Read",
        data: [2, 3, 4, 5, 7, 8, 10],
        borderColor: "#004080",
        backgroundColor: "rgba(0,64,128,0.1)",
        fill: true,
        tension: 0.4
      }]
    },
    options: { responsive: true, plugins: { legend: { display: false } } }
  });

  // Genre Chart
  new Chart(document.getElementById("genreChart"), {
    type: "bar",
    data: {
      labels: ["Fiction", "Romance", "Sci-Fi", "Mystery", "Non-Fiction"],
      datasets: [{
        data: [10, 6, 4, 8, 3],
        backgroundColor: ["#004080", "#00bcd4", "#ff9800", "#8e44ad", "#28a745"]
      }]
    },
    options: { responsive: true }
  });

  // Borrow Pie Chart
  new Chart(document.getElementById("borrowPieChart"), {
    type: "doughnut",
    data: {
      labels: ["Returned", "Borrowed", "Overdue"],
      datasets: [{
        data: [10, 2, 1],
        backgroundColor: ["#28a745", "#004080", "#dc3545"]
      }]
    },
    options: {
      responsive: true,
      plugins: { legend: { position: "bottom" } }
    }
  });
</script>

{% endblock %}
